prometheus:
  prometheusSpec:
    additionalScrapeConfigs:
    - job_name: "kubeEtcd-${CLUSTER_NAME}"
      file_sd_configs:
      - files:
        - '/prometheus/bosh_target_groups.json'
      scheme: https
      tls_config:
        ca_file: "/etc/prometheus/secrets/etcd-client/etcd-client-ca.crt"
        cert_file: "/etc/prometheus/secrets/etcd-client/etcd-client.crt"
        key_file:  "/etc/prometheus/secrets/etcd-client/etcd-client.key"
        server_name: "*.etcd.cfcr.internal"
      relabel_configs:
      - source_labels: [__meta_bosh_job_process_name]
        regex: etcd
        action: keep
      - source_labels: [__meta_bosh_deployment]
        regex: ${SERVICE_INSTANCE_ID}
        action: keep
      - source_labels: [__address__]
        regex:  '(.*)'
        target_label: __address__
        replacement: '${1}:2379'
    # - job_name: "kubeApiServer-${CLUSTER_NAME}"
    #   file_sd_configs:
    #   - files:
    #     - '/prometheus/bosh_target_groups.json'
    #   scheme: https
    #   tls_config:
    #     ca_file: "/etc/prometheus/secrets/kube-apiserver/kubernetes-ca.pem"
    #     cert_file: "/etc/prometheus/secrets/kube-apiserver/kubernetes.pem"
    #     key_file:  "/etc/prometheus/secrets/kube-apiserver/kubernetes-key.pem"
    #     server_name: "master.cfcr.internal"
    #   relabel_configs:
    #   - source_labels: [__meta_bosh_job_process_name]
    #     regex: kube-apiserver
    #     action: keep
    #   - source_labels: [__meta_bosh_deployment]
    #     regex: ${SERVICE_INSTANCE_ID}
    #     action: keep
    #   - source_labels: [__address__]
    #     regex:  '(.*)'
    #     target_label: __address__
    #     replacement: '${1}:8443'
    # - job_name: "kubeScheduler-${CLUSTER_NAME}"
    #   file_sd_configs:
    #   - files:
    #     - '/prometheus/bosh_target_groups.json'
    #   scheme: http
    #   relabel_configs:
    #   - source_labels: [__meta_bosh_job_process_name]
    #     regex: kube-scheduler
    #     action: keep
    #   - source_labels: [__meta_bosh_deployment]
    #     regex: ${SERVICE_INSTANCE_ID}
    #     action: keep
    #   - source_labels: [__address__]
    #     regex:  '(.*)'
    #     target_label: __address__
    #     replacement: '${1}:10251'
    # - job_name: "kubeControllerManager-${CLUSTER_NAME}"
    #   file_sd_configs:
    #   - files:
    #     - '/prometheus/bosh_target_groups.json'
    #   scheme: http
    #   relabel_configs:
    #   - source_labels: [__meta_bosh_job_process_name]
    #     regex: kube-controller-manager
    #     action: keep
    #   - source_labels: [__meta_bosh_deployment]
    #     regex: ${SERVICE_INSTANCE_ID}
    #     action: keep
    #   - source_labels: [__address__]
    #     regex:  '(.*)'
    #     target_label: __address__
    #     replacement: '${1}:10252'
