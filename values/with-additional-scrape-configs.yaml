prometheus:
  prometheusSpec:
    additionalScrapeConfigs:
    - job_name: "prometheus-cluster"
      scheme: http
      honor_labels: true
      metrics_path: "/federate"
      scrape_interval: 30s
      params:
        'match[]':
        - '{__name__=~"job:.*"}'  
      static_configs:
      - targets: 
        - "prometheus-01.haas-440.pez.pivotal.io"
        - "prometheus-02.haas-440.pez.pivotal.io"
    - job_name: kube-etcd
      file_sd_configs:
      - files:
        - '/etc/prometheus/configmaps/bosh-target-groups/bosh_target_groups.json'
      scheme: https
      tls_config:
        ca_file: "/etc/prometheus/secrets/etcd-client/etcd-client-ca.crt"
        cert_file: "/etc/prometheus/secrets/etcd-client/etcd-client.crt"
        key_file:  "/etc/prometheus/secrets/etcd-client/etcd-client.key"
        server_name: "*.etcd.cfcr.internal"
      relabel_configs:
      - source_labels: [__meta_bosh_job_process_name]
        regex: etcd
        action: keep
      - source_labels: [__meta_bosh_deployment]
        regex: service-instance_48a2843a-768a-48a0-b91d-86281ce7dff0
        action: keep
      - source_labels: [__address__]
        regex:  '(.*)'
        target_label: __address__
        replacement: '${1}:2379'
